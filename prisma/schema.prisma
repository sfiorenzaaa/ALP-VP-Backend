generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  USER
  ADMIN
}

enum EventStatus {
  PENDING
  APPROVE
  REJECT
}

enum VisualState {
  HAPPY
  SICK
  SAD
  THIN
}

enum ActivityType {
  WORK_TASK
  REST_MEANINGFUL
}

model User {
  id        Int      @id @default(autoincrement())
  username  String
  email     String   @unique
  password  String
  role      Role     @default(USER)
  createdAt DateTime @default(now())

  events     Event[]
  journals   Journal[]
  pet        Pet?
  activities UserActivityLog[]
}

model Event {
  id          Int         @id @default(autoincrement())
  title       String
  description String
  eventDate   DateTime
  status      EventStatus
  createdAt   DateTime    @default(now())

  userId Int 
  user   User @relation(fields: [userId], references: [id]) 
}

model Journal {
  id        Int      @id @default(autoincrement())
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
  content   String
  createdAt DateTime @default(now())
}

model Song {
  id            Int    @id @default(autoincrement())
  clue          String @unique
  options       Json
  correctAnswer String
}

model Pet {
  id             Int         @id @default(autoincrement())
  userId         Int         @unique
  name           String
  healthScore    Int         @default(100)
  happinessScore Int         @default(100)
  visualState    VisualState @default(HAPPY)
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt

  user User @relation(fields: [userId], references: [id])
}

model UserActivityLog {
  id           Int          @id @default(autoincrement())
  userId       Int
  activityType ActivityType
  description  String
  createdAt    DateTime     @default(now())

  user User @relation(fields: [userId], references: [id])
}
